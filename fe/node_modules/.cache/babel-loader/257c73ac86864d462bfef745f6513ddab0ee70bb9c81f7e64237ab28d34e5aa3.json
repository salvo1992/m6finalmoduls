{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\GitHub\\\\m6finalmoduls\\\\fe\\\\src\\\\components\\\\homePage\\\\MainContent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport LoadingIndicator from \"../loadingIndicator/LoadingIndicator\";\nimport ErrorAlert from \"../alerts/ErrorAlert\";\nimport BookCard from \"../card/BookCard\";\nimport useSession from \"../../hooks/useSession\";\nimport AddBookModal from \"../addBookModal/AddBookModal\";\nimport { nanoid } from \"@reduxjs/toolkit\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MainContent = () => {\n  _s();\n  const session = JSON.parse(localStorage.getItem('auth'));\n  const isAuthenticated = useSession();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [books, setBooks] = useState([]);\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const onChangePageSize = e => {\n    setPageSize(+e.target.value);\n  };\n  const next = () => {\n    setPage(prev => prev + 1);\n  };\n  const prev = () => {\n    setPage(prev => prev - 1);\n  };\n  const getBooks = async () => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/books?page=${page}&pageSize=${pageSize}`, {\n        method: 'GET',\n        headers: {\n          \"Content-type\": 'application/json',\n          \"authorization\": session\n        }\n      });\n      const data = await response.json();\n      setBooks(data);\n    } catch (e) {\n      setError(e.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    getBooks();\n  }, [page, pageSize]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container pt-5 pb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col pb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: onChangePageSize,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: 4,\n            children: \"Quattro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 7,\n            children: \"Sette\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 10,\n            children: \"Dieci\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [isLoading && /*#__PURE__*/_jsxDEV(LoadingIndicator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 31\n      }, this), !isLoading && error && /*#__PURE__*/_jsxDEV(ErrorAlert, {\n        message: \"Oops! Qualcosa \\xE8 andato storto durante il caricamento dei dati\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), isAuthenticated && !isLoading && !error && books.books && books.books.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-6 col-lg-4 col-xl-3 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(BookCard, {\n          title: book.title,\n          description: book.description,\n          cover: book.cover,\n          author: book.author.firstName || 'not found',\n          editor: book.editor,\n          isFeatured: book.isFeatured,\n          pubDate: book.pubDate,\n          price: book.price.$numberDecimal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 29\n        }, this)\n      }, nanoid(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: prev,\n        className: \"btn btn-primary\",\n        children: \"Precedente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: next,\n        className: \"btn btn-primary\",\n        children: \"Successivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(MainContent, \"jwUgSh5CP7z8CJapW9am17wHIPo=\", false, function () {\n  return [useSession];\n});\n_c = MainContent;\nexport default MainContent;\nvar _c;\n$RefreshReg$(_c, \"MainContent\");","map":{"version":3,"names":["React","useEffect","useState","LoadingIndicator","ErrorAlert","BookCard","useSession","AddBookModal","nanoid","jsxDEV","_jsxDEV","MainContent","_s","session","JSON","parse","localStorage","getItem","isAuthenticated","isLoading","setIsLoading","error","setError","books","setBooks","page","setPage","pageSize","setPageSize","onChangePageSize","e","target","value","next","prev","getBooks","response","fetch","process","env","REACT_APP_API_BASE_URL","method","headers","data","json","message","className","children","onChange","fileName","_jsxFileName","lineNumber","columnNumber","map","book","title","description","cover","author","firstName","editor","isFeatured","pubDate","price","$numberDecimal","onClick","_c","$RefreshReg$"],"sources":["C:/Users/user/Documents/GitHub/m6finalmoduls/fe/src/components/homePage/MainContent.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport LoadingIndicator from \"../loadingIndicator/LoadingIndicator\";\r\nimport ErrorAlert from \"../alerts/ErrorAlert\";\r\nimport BookCard from \"../card/BookCard\";\r\nimport useSession from \"../../hooks/useSession\";\r\nimport AddBookModal from \"../addBookModal/AddBookModal\";\r\nimport {nanoid} from \"@reduxjs/toolkit\";\r\n\r\nconst MainContent = () => {\r\n    const session = JSON.parse(localStorage.getItem('auth'))\r\n    const isAuthenticated = useSession();\r\n\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n    const [books, setBooks] = useState([])\r\n    const [page, setPage] = useState(1)\r\n    const [pageSize, setPageSize] = useState(10)\r\n\r\n    const onChangePageSize = (e) => {\r\n        setPageSize(+e.target.value)\r\n    }\r\n\r\n    const next = () => {\r\n        setPage(prev => prev + 1)\r\n    }\r\n\r\n    const prev = () => {\r\n        setPage(prev => prev - 1)\r\n    }\r\n\r\n    const getBooks = async () => {\r\n        setIsLoading(true)\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/books?page=${page}&pageSize=${pageSize}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    \"Content-type\": 'application/json',\r\n                    \"authorization\": session\r\n                }\r\n            })\r\n            const data = await response.json()\r\n            setBooks(data)\r\n        } catch (e) {\r\n            setError(e.message)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n            getBooks()\r\n    }, [page, pageSize])\r\n\r\n    return (\r\n        <div className=\"container pt-5 pb-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col pb-4\">\r\n                    <select onChange={onChangePageSize} >\r\n                        <option value={4}>Quattro</option>\r\n                        <option value={7}>Sette</option>\r\n                        <option value={10}>Dieci</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                {isLoading && <LoadingIndicator/>}\r\n                {!isLoading && error && (\r\n                    <ErrorAlert\r\n                        message=\"Oops! Qualcosa Ã¨ andato storto durante il caricamento dei dati\"\r\n                    />\r\n                )}\r\n                {isAuthenticated && !isLoading && !error && (\r\n                    books.books && books.books.map((book) => (\r\n                        <div key={nanoid()} className=\"col-12 col-md-6 col-lg-4 col-xl-3 mb-3\">\r\n                            <BookCard\r\n                                title={book.title}\r\n                                description={book.description}\r\n                                cover={book.cover}\r\n                                author={book.author.firstName || 'not found'}\r\n                                editor={book.editor}\r\n                                isFeatured={book.isFeatured}\r\n                                pubDate={book.pubDate}\r\n                                price={book.price.$numberDecimal}\r\n                            />\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n            <div className=\"d-flex justify-content-between\">\r\n                <button\r\n                    onClick={prev}\r\n                    className=\"btn btn-primary\">\r\n                    Precedente\r\n                </button>\r\n                <button\r\n                    onClick={next}\r\n                    className=\"btn btn-primary\">\r\n                    Successivo\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MainContent;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,gBAAgB,MAAM,sCAAsC;AACnE,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,YAAY,MAAM,8BAA8B;AACvD,SAAQC,MAAM,QAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACxD,MAAMC,eAAe,GAAGZ,UAAU,CAAC,CAAC;EAEpC,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACqB,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACuB,IAAI,EAAEC,OAAO,CAAC,GAAGxB,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACyB,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAM2B,gBAAgB,GAAIC,CAAC,IAAK;IAC5BF,WAAW,CAAC,CAACE,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAChC,CAAC;EAED,MAAMC,IAAI,GAAGA,CAAA,KAAM;IACfP,OAAO,CAACQ,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;EAC7B,CAAC;EAED,MAAMA,IAAI,GAAGA,CAAA,KAAM;IACfR,OAAO,CAACQ,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;EAC7B,CAAC;EAED,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;IACzBf,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACA,MAAMgB,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,sBAAuB,eAAcf,IAAK,aAAYE,QAAS,EAAC,EAAE;QAC1Gc,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE7B;QACrB;MACJ,CAAC,CAAC;MACF,MAAM8B,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAClCpB,QAAQ,CAACmB,IAAI,CAAC;IAClB,CAAC,CAAC,OAAOb,CAAC,EAAE;MACRR,QAAQ,CAACQ,CAAC,CAACe,OAAO,CAAC;IACvB,CAAC,SAAS;MACNzB,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC;EAEDnB,SAAS,CAAC,MAAM;IACRkC,QAAQ,CAAC,CAAC;EAClB,CAAC,EAAE,CAACV,IAAI,EAAEE,QAAQ,CAAC,CAAC;EAEpB,oBACIjB,OAAA;IAAKoC,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAChCrC,OAAA;MAAKoC,SAAS,EAAC,KAAK;MAAAC,QAAA,eAChBrC,OAAA;QAAKoC,SAAS,EAAC,UAAU;QAAAC,QAAA,eACrBrC,OAAA;UAAQsC,QAAQ,EAAEnB,gBAAiB;UAAAkB,QAAA,gBAC/BrC,OAAA;YAAQsB,KAAK,EAAE,CAAE;YAAAe,QAAA,EAAC;UAAO;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAClC1C,OAAA;YAAQsB,KAAK,EAAE,CAAE;YAAAe,QAAA,EAAC;UAAK;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAChC1C,OAAA;YAAQsB,KAAK,EAAE,EAAG;YAAAe,QAAA,EAAC;UAAK;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7B;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eACN1C,OAAA;MAAKoC,SAAS,EAAC,KAAK;MAAAC,QAAA,GACf5B,SAAS,iBAAIT,OAAA,CAACP,gBAAgB;QAAA8C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,EAChC,CAACjC,SAAS,IAAIE,KAAK,iBAChBX,OAAA,CAACN,UAAU;QACPyC,OAAO,EAAC;MAAgE;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CACJ,EACAlC,eAAe,IAAI,CAACC,SAAS,IAAI,CAACE,KAAK,IACpCE,KAAK,CAACA,KAAK,IAAIA,KAAK,CAACA,KAAK,CAAC8B,GAAG,CAAEC,IAAI,iBAChC5C,OAAA;QAAoBoC,SAAS,EAAC,wCAAwC;QAAAC,QAAA,eAClErC,OAAA,CAACL,QAAQ;UACLkD,KAAK,EAAED,IAAI,CAACC,KAAM;UAClBC,WAAW,EAAEF,IAAI,CAACE,WAAY;UAC9BC,KAAK,EAAEH,IAAI,CAACG,KAAM;UAClBC,MAAM,EAAEJ,IAAI,CAACI,MAAM,CAACC,SAAS,IAAI,WAAY;UAC7CC,MAAM,EAAEN,IAAI,CAACM,MAAO;UACpBC,UAAU,EAAEP,IAAI,CAACO,UAAW;UAC5BC,OAAO,EAAER,IAAI,CAACQ,OAAQ;UACtBC,KAAK,EAAET,IAAI,CAACS,KAAK,CAACC;QAAe;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpC;MAAC,GAVI5C,MAAM,CAAC,CAAC;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAWb,CACR,CACJ;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eACN1C,OAAA;MAAKoC,SAAS,EAAC,gCAAgC;MAAAC,QAAA,gBAC3CrC,OAAA;QACIuD,OAAO,EAAE/B,IAAK;QACdY,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAEhC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACT1C,OAAA;QACIuD,OAAO,EAAEhC,IAAK;QACda,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAEhC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAAxC,EAAA,CA9FKD,WAAW;EAAA,QAEWL,UAAU;AAAA;AAAA4D,EAAA,GAFhCvD,WAAW;AAgGjB,eAAeA,WAAW;AAAC,IAAAuD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}